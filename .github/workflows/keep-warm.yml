name: Keep Render Warm

on:
  schedule:
    - cron: "*/10 * * * *"   # every 10 minutes
  workflow_dispatch:         # allows manual run if you want

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Render Backend
        run: |
          echo "üè• Health check at $(date)"
          response=$(curl -s -w "HTTP_CODE:%{http_code}" https://subliminalgenbackend.onrender.com/health || echo "CURL_FAILED")
          
          if [[ $response == *"CURL_FAILED"* ]]; then
            echo "‚ùå Health check failed - curl error"
            exit 0
          elif [[ $response == *"HTTP_CODE:200"* ]]; then
            echo "‚úÖ Health check successful"
            echo "Response: ${response%HTTP_CODE:*}"
          else
            echo "‚ö†Ô∏è Health check returned non-200 status"
            echo "Full response: $response"
          fi