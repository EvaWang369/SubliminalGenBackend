name: Keep Render Warm Tertiary

on:
  schedule:
    - cron: "7,17,27,37,47,57 * * * *"  # every 10 minutes offset by 7
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Render Backend (Tertiary)
        run: |
          echo "üîÑ Tertiary health check at $(date)"
          response=$(curl -s -w "HTTP_CODE:%{http_code}" https://subliminalgenbackend.onrender.com/health || echo "CURL_FAILED")
          
          if [[ $response == *"CURL_FAILED"* ]]; then
            echo "‚ùå Health check failed - curl error"
          elif [[ $response == *"HTTP_CODE:200"* ]]; then
            echo "‚úÖ Health check successful"
            echo "Response: ${response%HTTP_CODE:*}"
          else
            echo "‚ö†Ô∏è Health check returned non-200 status"
            echo "Full response: $response"
          fi